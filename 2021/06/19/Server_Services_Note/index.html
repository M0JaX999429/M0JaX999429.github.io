<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="Shuheng Mo">





<title>Server management &amp; Services | Mo&#39;s Personal Blog Site</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


<meta name="generator" content="Hexo 5.4.0"></head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">Mo&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>
        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">Mo&#39;s Blog</a><a id="mobile-toggle-theme">Â·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    
        <div class="post-toc">
    <div class="tocbot-list">
    </div>
    <div class="tocbot-list-menu">
        <a class="tocbot-toc-expand" onclick="expand_toc()">Expand all</a>
        <a onclick="go_top()">Back to top</a>
        <a onclick="go_bottom()">Go to bottom</a>
    </div>
</div>

<script>
    document.ready(
        function () {
            tocbot.init({
                tocSelector: '.tocbot-list',
                contentSelector: '.post-content',
                headingSelector: 'h1, h2, h3, h4, h5',
                collapseDepth: 1,
                orderedList: false,
                scrollSmooth: true,
            })
        }
    )

    function expand_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 6,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "collapse_toc()");
        b.innerHTML = "Collapse all"
    }

    function collapse_toc() {
        var b = document.querySelector(".tocbot-toc-expand");
        tocbot.init({
            tocSelector: '.tocbot-list',
            contentSelector: '.post-content',
            headingSelector: 'h1, h2, h3, h4, h5',
            collapseDepth: 1,
            orderedList: false,
            scrollSmooth: true,
        });
        b.setAttribute("onclick", "expand_toc()");
        b.innerHTML = "Expand all"
    }

    function go_top() {
        window.scrollTo(0, 0);
    }

    function go_bottom() {
        window.scrollTo(0, document.body.scrollHeight);
    }

</script>
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">Server management &amp; Services</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">Shuheng Mo</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">June 19, 2021&nbsp;&nbsp;3:09:02</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/Technical/">Technical</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <h1 id="Protection-Process-or-daemon-PID-1"><a href="#Protection-Process-or-daemon-PID-1" class="headerlink" title="Protection Process (or daemon, PID = 1 )"></a>Protection Process (or daemon, PID = 1 )</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The boot process of Linux system</span></span><br><span class="line"><span class="comment"># BIOS --&gt; Bootloader --&gt; load system kernel --&gt; init kernel --&gt; init init processes --&gt; init task</span></span><br><span class="line"><span class="comment"># System V (for old version, not used since centOS 7) --&gt; newest version : systemd</span></span><br><span class="line">man systemctl</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># use systemd to manage the system events</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># process start and end : systemctl, here we first install Samba on the centOS server</span></span><br><span class="line">sudo yum -y install samba</span><br><span class="line"></span><br><span class="line"><span class="comment"># start the samba service</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl start smb</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ps -aux | grep smb</span></span><br><span class="line">root       1688  0.4  0.6 454396 12888 ?        Ss   21:03   0:00 /usr/sbin/smbd --foreground --no-process-group</span><br><span class="line">root       1690  0.0  0.2 450244  3888 ?        S    21:03   0:00 /usr/sbin/smbd --foreground --no-process-group</span><br><span class="line">root       1691  0.0  0.1 450236  3608 ?        S    21:03   0:00 /usr/sbin/smbd --foreground --no-process-group</span><br><span class="line">root       1692  0.0  0.2 454396  4152 ?        S    21:03   0:00 /usr/sbin/smbd --foreground --no-process-group</span><br><span class="line">root       1695  0.0  0.0 112812   972 pts/0    S+   21:03   0:00 grep --color=auto smb</span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl status smb</span></span><br><span class="line">â smb.service - Samba SMB Daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/smb.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Sun 2021-03-14 21:03:10 CST; 59s ago</span><br><span class="line">     Docs: man:smbd(8)</span><br><span class="line">           man:samba(7)</span><br><span class="line">           man:smb.conf(5)</span><br><span class="line"> Main PID: 1688 (smbd)</span><br><span class="line">   Status: <span class="string">&quot;smbd: ready to serve connections...&quot;</span></span><br><span class="line">   CGroup: /system.slice/smb.service</span><br><span class="line">           ââ1688 /usr/sbin/smbd --foreground --no-process-group</span><br><span class="line">           ââ1690 /usr/sbin/smbd --foreground --no-process-group</span><br><span class="line">           ââ1691 /usr/sbin/smbd --foreground --no-process-group</span><br><span class="line">           ââ1692 /usr/sbin/smbd --foreground --no-process-group</span><br><span class="line"></span><br><span class="line">Mar 14 21:03:10 localhost.localdomain systemd[1]: Starting Samba SMB Daemon...</span><br><span class="line">Mar 14 21:03:10 localhost.localdomain smbd[1688]: [2021/03/14 21:03:10.938044...</span><br><span class="line">Mar 14 21:03:10 localhost.localdomain systemd[1]: Started Samba SMB Daemon.</span><br><span class="line">Mar 14 21:03:10 localhost.localdomain smbd[1688]:   daemon_ready: daemon <span class="string">&#x27;smb...</span></span><br><span class="line"><span class="string">Hint: Some lines were ellipsized, use -l to show in full.</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl stop smb</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl status smb</span></span><br><span class="line"><span class="string">â smb.service - Samba SMB Daemon</span></span><br><span class="line"><span class="string">   Loaded: loaded (/usr/lib/systemd/system/smb.service; disabled; vendor preset: disabled)</span></span><br><span class="line"><span class="string">   Active: inactive (dead)</span></span><br><span class="line"><span class="string">     Docs: man:smbd(8)</span></span><br><span class="line"><span class="string">           man:samba(7)</span></span><br><span class="line"><span class="string">           man:smb.conf(5)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Mar 14 21:03:10 localhost.localdomain systemd[1]: Starting Samba SMB Daemon...</span></span><br><span class="line"><span class="string">Mar 14 21:03:10 localhost.localdomain smbd[1688]: [2021/03/14 21:03:10.938044...</span></span><br><span class="line"><span class="string">Mar 14 21:03:10 localhost.localdomain systemd[1]: Started Samba SMB Daemon.</span></span><br><span class="line"><span class="string">Mar 14 21:03:10 localhost.localdomain smbd[1688]:   daemon_ready: daemon &#x27;</span>smb...</span><br><span class="line">Mar 14 21:04:18 localhost.localdomain systemd[1]: Stopping Samba SMB Daemon...</span><br><span class="line">Mar 14 21:04:18 localhost.localdomain systemd[1]: Stopped Samba SMB Daemon.</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show <span class="keyword">in</span> full.</span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart smb</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl status smb</span></span><br><span class="line">â smb.service - Samba SMB Daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/smb.service; disabled; vendor preset: disabled)</span><br><span class="line">   Active: active (running) since Sun 2021-03-14 21:05:04 CST; 2s ago</span><br><span class="line">     Docs: man:smbd(8)</span><br><span class="line">           man:samba(7)</span><br><span class="line">           man:smb.conf(5)</span><br><span class="line"> Main PID: 1711 (smbd)</span><br><span class="line">   Status: <span class="string">&quot;smbd: ready to serve connections...&quot;</span></span><br><span class="line">   CGroup: /system.slice/smb.service</span><br><span class="line">           ââ1711 /usr/sbin/smbd --foreground --no-process-group</span><br><span class="line">           ââ1713 /usr/sbin/smbd --foreground --no-process-group</span><br><span class="line">           ââ1714 /usr/sbin/smbd --foreground --no-process-group</span><br><span class="line">           ââ1715 /usr/sbin/smbd --foreground --no-process-group</span><br><span class="line"></span><br><span class="line">Mar 14 21:05:04 localhost.localdomain systemd[1]: Starting Samba SMB Daemon...</span><br><span class="line">Mar 14 21:05:04 localhost.localdomain smbd[1711]: [2021/03/14 21:05:04.988942...</span><br><span class="line">Mar 14 21:05:04 localhost.localdomain systemd[1]: Started Samba SMB Daemon.</span><br><span class="line">Mar 14 21:05:04 localhost.localdomain smbd[1711]:   daemon_ready: daemon <span class="string">&#x27;smb...</span></span><br><span class="line"><span class="string">Hint: Some lines were ellipsized, use -l to show in full.</span></span><br><span class="line"><span class="string"># list all active units (or systemctl is the same)</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl list-units</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl list-units --type=service</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># to view Samba service details</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl cat smb.service</span></span><br><span class="line"><span class="string"># /usr/lib/systemd/system/smb.service</span></span><br><span class="line"><span class="string">[Unit]</span></span><br><span class="line"><span class="string">Description=Samba SMB Daemon</span></span><br><span class="line"><span class="string">Documentation=man:smbd(8) man:samba(7) man:smb.conf(5)</span></span><br><span class="line"><span class="string">Wants=network-online.target</span></span><br><span class="line"><span class="string">After=network.target network-online.target nmb.service winbind.service</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Service]</span></span><br><span class="line"><span class="string">Type=notify</span></span><br><span class="line"><span class="string">NotifyAccess=all</span></span><br><span class="line"><span class="string">PIDFile=/run/smbd.pid</span></span><br><span class="line"><span class="string">LimitNOFILE=16384</span></span><br><span class="line"><span class="string">EnvironmentFile=-/etc/sysconfig/samba</span></span><br><span class="line"><span class="string">ExecStart=/usr/sbin/smbd --foreground --no-process-group $SMBDOPTIONS</span></span><br><span class="line"><span class="string">ExecReload=/bin/kill -HUP $MAINPID</span></span><br><span class="line"><span class="string">LimitCORE=infinity</span></span><br><span class="line"><span class="string">Environment=KRB5CCNAME=FILE:/run/samba/krb5cc_samba</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[Install]</span></span><br><span class="line"><span class="string">WantedBy=multi-user.target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># incase you want edit the samba service file (it will not write through the original file)</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl edit smb.service</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># useful commands after modified the service file</span></span><br><span class="line"><span class="string">systemctl edit --full smb.service</span></span><br><span class="line"><span class="string">systemctl daemon -reload</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># target and System V level targets </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># view all the target</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl list-units --type=target --all</span></span><br><span class="line"><span class="string">  UNIT                      LOAD      ACTIVE   SUB    DESCRIPTION</span></span><br><span class="line"><span class="string">  basic.target              loaded    active   active Basic System</span></span><br><span class="line"><span class="string">  bluetooth.target          loaded    active   active Bluetooth</span></span><br><span class="line"><span class="string">  cryptsetup.target         loaded    active   active Local Encrypted Volumes</span></span><br><span class="line"><span class="string">  emergency.target          loaded    inactive dead   Emergency Mode</span></span><br><span class="line"><span class="string">  final.target              loaded    inactive dead   Final Step</span></span><br><span class="line"><span class="string">  getty-pre.target          loaded    inactive dead   Login Prompts (Pre)</span></span><br><span class="line"><span class="string">  getty.target              loaded    active   active Login Prompts</span></span><br><span class="line"><span class="string">  graphical.target          loaded    inactive dead   Graphical Interface</span></span><br><span class="line"><span class="string">  initrd-fs.target          loaded    inactive dead   Initrd File Systems</span></span><br><span class="line"><span class="string">  initrd-root-fs.target     loaded    inactive dead   Initrd Root File System</span></span><br><span class="line"><span class="string">  initrd-switch-root.target loaded    inactive dead   Switch Root</span></span><br><span class="line"><span class="string">  initrd.target             loaded    inactive dead   Initrd Default Target</span></span><br><span class="line"><span class="string">  local-fs-pre.target       loaded    active   active Local File Systems (Pre)</span></span><br><span class="line"><span class="string">  local-fs.target           loaded    active   active Local File Systems</span></span><br><span class="line"><span class="string">  multi-user.target         loaded    active   active Multi-User System</span></span><br><span class="line"><span class="string">  network-online.target     loaded    active   active Network is Online</span></span><br><span class="line"><span class="string">  network-pre.target        loaded    active   active Network (Pre)</span></span><br><span class="line"><span class="string">  network.target            loaded    active   active Network</span></span><br><span class="line"><span class="string">  nss-user-lookup.target    loaded    inactive dead   User and Group Name Lookup</span></span><br><span class="line"><span class="string">  paths.target              loaded    active   active Paths</span></span><br><span class="line"><span class="string">  remote-fs-pre.target      loaded    inactive dead   Remote File Systems (Pre)</span></span><br><span class="line"><span class="string">  remote-fs.target          loaded    active   active Remote File Systems</span></span><br><span class="line"><span class="string">  rescue.target             loaded    inactive dead   Rescue Mode</span></span><br><span class="line"><span class="string">  shutdown.target           loaded    inactive dead   Shutdown</span></span><br><span class="line"><span class="string">  slices.target             loaded    active   active Slices</span></span><br><span class="line"><span class="string">  sockets.target            loaded    active   active Sockets</span></span><br><span class="line"><span class="string">  sound.target              loaded    active   active Sound Card</span></span><br><span class="line"><span class="string">  swap.target               loaded    active   active Swap</span></span><br><span class="line"><span class="string">  sysinit.target            loaded    active   active System Initialization</span></span><br><span class="line"><span class="string">â syslog.target             not-found inactive dead   syslog.target</span></span><br><span class="line"><span class="string">  time-sync.target          loaded    inactive dead   System Time Synchronized</span></span><br><span class="line"><span class="string">  timers.target             loaded    active   active Timers</span></span><br><span class="line"><span class="string">  umount.target             loaded    inactive dead   Unmount All Filesystems</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">LOAD   = Reflects whether the unit definition was properly loaded.</span></span><br><span class="line"><span class="string">ACTIVE = The high-level unit activation state, i.e. generalization of SUB.</span></span><br><span class="line"><span class="string">SUB    = The low-level unit activation state, values depend on unit type.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">33 loaded units listed.</span></span><br><span class="line"><span class="string">lines 1-40/41 98%</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># if you want to see all dependencies on one target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl list-dependencies graphical.target</span></span><br><span class="line"><span class="string">graphical.target</span></span><br><span class="line"><span class="string">â ââdisplay-manager.service</span></span><br><span class="line"><span class="string">â âânetwork.service</span></span><br><span class="line"><span class="string">â ââsystemd-update-utmp-runlevel.service</span></span><br><span class="line"><span class="string">â ââmulti-user.target</span></span><br><span class="line"><span class="string">â   ââauditd.service</span></span><br><span class="line"><span class="string">â   ââchronyd.service</span></span><br><span class="line"><span class="string">â   ââcrond.service</span></span><br><span class="line"><span class="string">â   ââdbus.service</span></span><br><span class="line"><span class="string">â   ââfirewalld.service</span></span><br><span class="line"><span class="string">â   ââirqbalance.service</span></span><br><span class="line"><span class="string">â   ââkdump.service</span></span><br><span class="line"><span class="string">â   âânetwork.service</span></span><br><span class="line"><span class="string">â   ââNetworkManager.service</span></span><br><span class="line"><span class="string">â   ââplymouth-quit-wait.service</span></span><br><span class="line"><span class="string">â   ââplymouth-quit.service</span></span><br><span class="line"><span class="string">â   ââpostfix.service</span></span><br><span class="line"><span class="string">â   âârhel-configure.service</span></span><br><span class="line"><span class="string">â   âârsyslog.service</span></span><br><span class="line"><span class="string">â   ââsshd.service</span></span><br><span class="line"><span class="string">â   ââsystemd-ask-password-wall.path</span></span><br><span class="line"><span class="string">â   ââsystemd-logind.service</span></span><br><span class="line"><span class="string">â   ââsystemd-readahead-collect.service</span></span><br><span class="line"><span class="string">â   ââsystemd-readahead-replay.service</span></span><br><span class="line"><span class="string">â   ââsystemd-update-utmp-runlevel.service</span></span><br><span class="line"><span class="string">â   ââsystemd-user-sessions.service</span></span><br><span class="line"><span class="string">â   ââtuned.service</span></span><br><span class="line"><span class="string">â   ââbasic.target</span></span><br><span class="line"><span class="string">â   â ââmicrocode.service</span></span><br><span class="line"><span class="string">â   â âârhel-dmesg.service</span></span><br><span class="line"><span class="string">â   â ââselinux-policy-migrate-local-changes@targeted.service</span></span><br><span class="line"><span class="string">â   â ââpaths.target</span></span><br><span class="line"><span class="string">â   â ââslices.target</span></span><br><span class="line"><span class="string">â   â â ââ-.slice</span></span><br><span class="line"><span class="string">â   â â ââsystem.slice</span></span><br><span class="line"><span class="string">â   â ââsockets.target</span></span><br><span class="line"><span class="string">â   â â ââdbus.socket</span></span><br><span class="line"><span class="string">â   â â ââdm-event.socket</span></span><br><span class="line"><span class="string">â   â â ââsystemd-initctl.socket</span></span><br><span class="line"><span class="string">â   â â ââsystemd-journald.socket</span></span><br><span class="line"><span class="string">â   â â ââsystemd-shutdownd.socket</span></span><br><span class="line"><span class="string">â   â â ââsystemd-udevd-control.socket</span></span><br><span class="line"><span class="string">â   â â ââsystemd-udevd-kernel.socket</span></span><br><span class="line"><span class="string">â   â ââsysinit.target</span></span><br><span class="line"><span class="string">â   â â ââdev-hugepages.mount</span></span><br><span class="line"><span class="string">â   â â ââdev-mqueue.mount</span></span><br><span class="line"><span class="string">â   â â ââkmod-static-nodes.service</span></span><br><span class="line"><span class="string">â   â â ââlvm2-lvmetad.socket</span></span><br><span class="line"><span class="string">â   â â ââlvm2-lvmpolld.socket</span></span><br><span class="line"><span class="string">â   â â ââlvm2-monitor.service</span></span><br><span class="line"><span class="string">â   â â ââplymouth-read-write.service</span></span><br><span class="line"><span class="string">â   â â ââplymouth-start.service</span></span><br><span class="line"><span class="string">â   â â ââproc-sys-fs-binfmt_misc.automount</span></span><br><span class="line"><span class="string">â   â â âârhel-autorelabel-mark.service</span></span><br><span class="line"><span class="string">â   â â âârhel-autorelabel.service</span></span><br><span class="line"><span class="string">â   â â âârhel-domainname.service</span></span><br><span class="line"><span class="string">â   â â âârhel-import-state.service</span></span><br><span class="line"><span class="string">â   â â âârhel-loadmodules.service</span></span><br><span class="line"><span class="string">â   â â ââsys-fs-fuse-connections.mount</span></span><br><span class="line"><span class="string">â   â â ââsys-kernel-config.mount</span></span><br><span class="line"><span class="string">â   â â ââsys-kernel-debug.mount</span></span><br><span class="line"><span class="string">â   â â ââsystemd-ask-password-console.path</span></span><br><span class="line"><span class="string">â   â â ââsystemd-binfmt.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-firstboot.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-hwdb-update.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-journal-catalog-update.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-journal-flush.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-journald.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-machine-id-commit.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-modules-load.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-random-seed.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-sysctl.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-tmpfiles-setup-dev.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-tmpfiles-setup.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-udev-trigger.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-udevd.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-update-done.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-update-utmp.service</span></span><br><span class="line"><span class="string">â   â â ââsystemd-vconsole-setup.service</span></span><br><span class="line"><span class="string">â   â â ââcryptsetup.target</span></span><br><span class="line"><span class="string">â   â â ââlocal-fs.target</span></span><br><span class="line"><span class="string">â   â â â ââ-.mount</span></span><br><span class="line"><span class="string">â   â â â ââboot.mount</span></span><br><span class="line"><span class="string">â   â â â âârhel-readonly.service</span></span><br><span class="line"><span class="string">â   â â â ââsystemd-remount-fs.service</span></span><br><span class="line"><span class="string">â   â â ââswap.target</span></span><br><span class="line"><span class="string">â   â â   ââdev-mapper-centos\x2dswap.swap</span></span><br><span class="line"><span class="string">â   â ââtimers.target</span></span><br><span class="line"><span class="string">â   â   ââsystemd-tmpfiles-clean.timer</span></span><br><span class="line"><span class="string">â   ââgetty.target</span></span><br><span class="line"><span class="string">â   â ââgetty@tty1.service</span></span><br><span class="line"><span class="string">â   ââremote-fs.target</span></span><br><span class="line"><span class="string">lines 53-92/92 (END)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl get-default</span></span><br><span class="line"><span class="string">multi-user.target</span></span><br><span class="line"><span class="string"># switch to single-user mode / set target as default target</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl isolate rescue.target</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl set-default [target_name].target</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># management journal</span></span><br><span class="line"><span class="string">[root@localhost ~]# journalctl </span></span><br><span class="line"><span class="string"># journal from last boot</span></span><br><span class="line"><span class="string">[root@localhost ~]# journalctl -b</span></span><br><span class="line"><span class="string"># journal of kernel</span></span><br><span class="line"><span class="string">[root@localhost ~]# journalctl -k</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># boot time</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemd-analyze </span></span><br><span class="line"><span class="string">Startup finished in 934ms (kernel) + 1.529s (initrd) + 6.384s (userspace) = 8.848s</span></span><br><span class="line"><span class="string"># see service that cost most time</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemd-analyze blame</span></span><br><span class="line"><span class="string">          2.409s kdump.service</span></span><br><span class="line"><span class="string">          1.363s dev-mapper-centos\x2droot.device</span></span><br><span class="line"><span class="string">          1.286s lvm2-monitor.service</span></span><br><span class="line"><span class="string">          1.196s tuned.service</span></span><br><span class="line"><span class="string">           739ms postfix.service</span></span><br><span class="line"><span class="string">           662ms dracut-initqueue.service</span></span><br><span class="line"><span class="string">           659ms NetworkManager-wait-online.service</span></span><br><span class="line"><span class="string">           626ms firewalld.service</span></span><br><span class="line"><span class="string">           341ms initrd-switch-root.service</span></span><br><span class="line"><span class="string">           334ms network.service</span></span><br><span class="line"><span class="string">           239ms sysroot.mount</span></span><br><span class="line"><span class="string">           197ms boot.mount</span></span><br><span class="line"><span class="string">           189ms auditd.service</span></span><br><span class="line"><span class="string">           178ms polkit.service</span></span><br><span class="line"><span class="string">           161ms dracut-cmdline.service</span></span><br><span class="line"><span class="string">           156ms dracut-pre-pivot.service</span></span><br><span class="line"><span class="string">           140ms lvm2-pvscan@8:2.service</span></span><br><span class="line"><span class="string">           127ms chronyd.service</span></span><br><span class="line"><span class="string">           119ms systemd-udev-trigger.service</span></span><br><span class="line"><span class="string">           107ms systemd-logind.service</span></span><br><span class="line"><span class="string">           107ms rhel-readonly.service</span></span><br><span class="line"><span class="string">            95ms sshd.service</span></span><br><span class="line"><span class="string">            92ms systemd-user-sessions.service</span></span><br><span class="line"><span class="string">            91ms rhel-dmesg.service</span></span><br><span class="line"><span class="string">            85ms smb.service</span></span><br><span class="line"><span class="string">            76ms systemd-udevd.service</span></span><br><span class="line"><span class="string">            68ms NetworkManager.service</span></span><br><span class="line"><span class="string">            66ms plymouth-start.service</span></span><br><span class="line"><span class="string">            59ms systemd-tmpfiles-setup-dev.service</span></span><br><span class="line"><span class="string">            58ms rhel-import-state.service</span></span><br><span class="line"><span class="string">            54ms rsyslog.service</span></span><br><span class="line"><span class="string">            53ms systemd-vconsole-setup.service</span></span><br><span class="line"><span class="string">            52ms initrd-parse-etc.service</span></span><br><span class="line"><span class="string">            49ms dracut-pre-udev.service</span></span><br><span class="line"><span class="string">            49ms rhel-domainname.service</span></span><br><span class="line"><span class="string">            45ms systemd-journald.service</span></span><br><span class="line"><span class="string">            37ms dev-hugepages.mount</span></span><br><span class="line"><span class="string">            37ms kmod-static-nodes.service</span></span><br><span class="line"><span class="string">            35ms plymouth-quit-wait.service</span></span><br><span class="line"><span class="string">            30ms systemd-sysctl.service</span></span><br><span class="line"><span class="string">            28ms plymouth-read-write.service</span></span><br><span class="line"><span class="string">            26ms systemd-remount-fs.service</span></span><br><span class="line"><span class="string">            26ms plymouth-switch-root.service</span></span><br><span class="line"><span class="string">            25ms dev-mqueue.mount</span></span><br><span class="line"><span class="string">            25ms systemd-tmpfiles-setup.service</span></span><br><span class="line"><span class="string">            24ms systemd-journal-flush.service</span></span><br><span class="line"><span class="string">            23ms sys-kernel-debug.mount</span></span><br><span class="line"><span class="string">            22ms plymouth-quit.service</span></span><br><span class="line"><span class="string">            20ms initrd-cleanup.service</span></span><br><span class="line"><span class="string">            20ms systemd-tmpfiles-clean.service</span></span><br><span class="line"><span class="string">            19ms dev-mapper-centos\x2dswap.swap</span></span><br><span class="line"><span class="string">            12ms systemd-update-utmp.service</span></span><br><span class="line"><span class="string">            11ms systemd-fsck-root.service</span></span><br><span class="line"><span class="string">            11ms systemd-random-seed.service</span></span><br><span class="line"><span class="string">            11ms systemd-update-utmp-runlevel.service</span></span><br><span class="line"><span class="string">             7ms systemd-rfkill@rfkill0.service</span></span><br><span class="line"><span class="string">             6ms initrd-udevadm-cleanup-db.service</span></span><br><span class="line"><span class="string">             5ms sys-kernel-config.mount</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># you can disable the boot of some services</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl disable [xxx.service]</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl mask [xxx.service]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># you can cancel the mask op</span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl unmask [xxx.service]</span></span><br></pre></td></tr></table></figure>

<p>#Apache</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum install -y httpd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># start /stop /restart Apache</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl start httpd</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl stop httpd</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart httpd</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># ps -aux | grep httpd</span></span><br><span class="line">root       1837  0.0  0.2 224084  5052 ?        Ss   21:31   0:00 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">apache     1838  0.0  0.1 224084  2928 ?        S    21:31   0:00 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">apache     1839  0.0  0.1 224084  2928 ?        S    21:31   0:00 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">apache     1840  0.0  0.1 224084  2928 ?        S    21:31   0:00 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">apache     1841  0.0  0.1 224084  2928 ?        S    21:31   0:00 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">apache     1842  0.0  0.1 224084  2928 ?        S    21:31   0:00 /usr/sbin/httpd -DFOREGROUND</span><br><span class="line">root       1857  0.0  0.0 112812   972 pts/0    S+   21:33   0:00 grep --color=auto httpd</span><br><span class="line"></span><br><span class="line"><span class="comment"># reload the Apache config file</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl reload httpd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># status</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl status httpd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># start when boot</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl enable httpd</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl disable httpd</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl is-enabled httpd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># why we are unable to access virtual machine and centos server? firewall!</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># no fire wall open ports</span></span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --list-ports</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># option 1: shutdown the firewall</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl stop firewalld</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl status firewalld</span></span><br><span class="line">â firewalld.service - firewalld - dynamic firewall daemon</span><br><span class="line">   Loaded: loaded (/usr/lib/systemd/system/firewalld.service; enabled; vendor preset: enabled)</span><br><span class="line">   Active: inactive (dead) since Sun 2021-03-14 21:40:35 CST; 9s ago</span><br><span class="line">     Docs: man:firewalld(1)</span><br><span class="line">  Process: 709 ExecStart=/usr/sbin/firewalld --nofork --nopid <span class="variable">$FIREWALLD_ARGS</span> (code=exited, status=0/SUCCESS)</span><br><span class="line"> Main PID: 709 (code=exited, status=0/SUCCESS)</span><br><span class="line"></span><br><span class="line">Mar 14 21:00:09 localhost.localdomain systemd[1]: Starting firewalld - dynami...</span><br><span class="line">Mar 14 21:00:09 localhost.localdomain systemd[1]: Started firewalld - dynamic...</span><br><span class="line">Mar 14 21:00:10 localhost.localdomain firewalld[709]: WARNING: AllowZoneDrift...</span><br><span class="line">Mar 14 21:40:33 localhost.localdomain systemd[1]: Stopping firewalld - dynami...</span><br><span class="line">Mar 14 21:40:35 localhost.localdomain systemd[1]: Stopped firewalld - dynamic...</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show <span class="keyword">in</span> full.</span><br><span class="line"></span><br><span class="line"><span class="comment"># option 2: open a port for http services permanently</span></span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --get-active-zones</span></span><br><span class="line">public</span><br><span class="line">  interfaces: ens33</span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --get-default-zone</span></span><br><span class="line">public</span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --zone=public --add-port=80/tcp --permanent</span></span><br><span class="line">success</span><br><span class="line"><span class="comment"># activate it immediately</span></span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --reload</span></span><br><span class="line">success</span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --list-ports</span></span><br><span class="line">80/tcp</span><br><span class="line"></span><br><span class="line"><span class="comment">#check whether this port is open now</span></span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --zone=public --query-port=80/tcp</span></span><br><span class="line">yes</span><br><span class="line"></span><br><span class="line"><span class="comment"># in case you want to remove this port</span></span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --zone=public --remove-port=80/tcp --permanent</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="Apache-configuration"><a href="#Apache-configuration" class="headerlink" title="Apache configuration"></a>Apache configuration</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">[root@mos-computer mo]<span class="comment"># ls /etc/httpd</span></span><br><span class="line">[root@mos-computer mo]<span class="comment"># ls /etc/httpd/conf/httpd.conf</span></span><br><span class="line">/etc/httpd/conf/httpd.conf</span><br><span class="line">[root@mos-computer mo]<span class="comment"># ls /var/www/html</span></span><br><span class="line">[root@mos-computer mo]<span class="comment"># ls /var/log/httpd/access_log</span></span><br><span class="line">/var/<span class="built_in">log</span>/httpd/access_log</span><br><span class="line">[root@mos-computer mo]<span class="comment"># ls /var/log/httpd/error_log</span></span><br><span class="line">/var/<span class="built_in">log</span>/httpd/error_log</span><br><span class="line"></span><br><span class="line"><span class="comment"># Some common args: ServerRoot, Listen, User, ServerAdmin ... if you have no idea, google them </span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;Welcome to Linux system&quot; &gt; /var/www/html/index.html</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /var/www/html/index.html</span></span><br><span class="line">Welcome to Linux system</span><br><span class="line"><span class="comment"># now open server to see what happened</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /home/web</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;New web directory&quot; &gt; /home/web/index.html</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /home/web/index.html</span></span><br><span class="line">New web directory</span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># modify the conf file as</span></span><br><span class="line">DocumentRoot: <span class="string">&quot;/home/web&quot;</span></span><br><span class="line">&lt;Directory <span class="string">&quot;/home/web&quot;</span>/&gt;</span><br><span class="line">	AllowOverride None</span><br><span class="line">	<span class="comment">#Allow open access:</span></span><br><span class="line">	Require all granted</span><br><span class="line">&lt;/Directory&gt;</span><br><span class="line"><span class="comment"># now reload</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl reload httpd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># It seems nothing changed ... it&#x27;s because of SElinux, let&#x27;s learn it in the next section</span></span><br></pre></td></tr></table></figure>

<h1 id="SElinux-Security-Enhanced-Linux"><a href="#SElinux-Security-Enhanced-Linux" class="headerlink" title="SElinux (Security-Enhanced Linux)"></a>SElinux (Security-Enhanced Linux)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Mandatory Access Control</span></span><br><span class="line"><span class="comment"># some manner: Domain Limitation, Security Context, which makes SElinux more like a safe</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Three config modes:</span></span><br><span class="line"><span class="comment">#enforcing: blocking all illegal access</span></span><br><span class="line"><span class="comment">#permissive: only warning without blocking some accesses without permission</span></span><br><span class="line"><span class="comment">#disable: no warning and blocking</span></span><br><span class="line">[root@localhost ~]<span class="comment"># se status</span></span><br><span class="line">-bash: se: <span class="built_in">command</span> not found</span><br><span class="line">[root@localhost ~]<span class="comment"># sestatus</span></span><br><span class="line">SELinux status:                 enabled</span><br><span class="line">SELinuxfs mount:                /sys/fs/selinux</span><br><span class="line">SELinux root directory:         /etc/selinux</span><br><span class="line">Loaded policy name:             targeted</span><br><span class="line">Current mode:                   enforcing</span><br><span class="line">Mode from config file:          enforcing</span><br><span class="line">Policy MLS status:              enabled</span><br><span class="line">Policy deny_unknown status:     allowed</span><br><span class="line">Max kernel policy version:      31</span><br><span class="line">[root@localhost ~]<span class="comment"># sestatus -v</span></span><br><span class="line">SELinux status:                 enabled</span><br><span class="line">SELinuxfs mount:                /sys/fs/selinux</span><br><span class="line">SELinux root directory:         /etc/selinux</span><br><span class="line">Loaded policy name:             targeted</span><br><span class="line">Current mode:                   enforcing</span><br><span class="line">Mode from config file:          enforcing</span><br><span class="line">Policy MLS status:              enabled</span><br><span class="line">Policy deny_unknown status:     allowed</span><br><span class="line">Max kernel policy version:      31</span><br><span class="line"></span><br><span class="line">Process contexts:</span><br><span class="line">Current context:                unconfined_u:unconfined_r:unconfined_t:s0-s0:c0.c1023</span><br><span class="line">Init context:                   system_u:system_r:init_t:s0</span><br><span class="line">/usr/sbin/sshd                  system_u:system_r:sshd_t:s0-s0:c0.c1023</span><br><span class="line"></span><br><span class="line">File contexts:</span><br><span class="line">Controlling terminal:           unconfined_u:object_r:user_devpts_t:s0</span><br><span class="line">/etc/passwd                     system_u:object_r:passwd_file_t:s0</span><br><span class="line">/etc/shadow                     system_u:object_r:shadow_t:s0</span><br><span class="line">/bin/bash                       system_u:object_r:shell_exec_t:s0</span><br><span class="line">/bin/login                      system_u:object_r:login_exec_t:s0</span><br><span class="line">/bin/sh                         system_u:object_r:bin_t:s0 -&gt; system_u:object_r:shell_exec_t:s0</span><br><span class="line">/sbin/agetty                    system_u:object_r:getty_exec_t:s0</span><br><span class="line">/sbin/init                      system_u:object_r:bin_t:s0 -&gt; system_u:object_r:init_exec_t:s0</span><br><span class="line">/usr/sbin/sshd                  system_u:object_r:sshd_exec_t:s0</span><br><span class="line"><span class="comment">#view the config file</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/selinux/config</span></span><br><span class="line">[root@localhost ~]<span class="comment"># getenforce </span></span><br><span class="line">Enforcing</span><br><span class="line">[root@localhost ~]<span class="comment"># setenforce 0</span></span><br><span class="line">[root@localhost ~]<span class="comment"># getenforce </span></span><br><span class="line">Permissive</span><br><span class="line">[root@localhost ~]<span class="comment"># setenforce 1</span></span><br><span class="line">[root@localhost ~]<span class="comment"># getenforce </span></span><br><span class="line">Enforcing</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -Zd /var/www/html</span></span><br><span class="line">drwxr-xr-x. root root system_u:object_r:httpd_sys_content_t:s0 /var/www/html</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -Zd /home/web</span></span><br><span class="line">drwxr-xr-x. root root unconfined_u:object_r:home_root_t:s0 /home/web</span><br><span class="line"></span><br><span class="line"><span class="comment">#modify se management</span></span><br><span class="line">[root@localhost ~]<span class="comment"># semanage</span></span><br><span class="line">-bash: semanage: <span class="built_in">command</span> not found</span><br><span class="line">[root@localhost ~]<span class="comment"># yum provides semanage</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line"> * base: mirrors.cqu.edu.cn</span><br><span class="line"> * extras: mirrors.cqu.edu.cn</span><br><span class="line"> * updates: mirrors.cqu.edu.cn</span><br><span class="line">base/7/x86_64/filelists_db                               | 7.2 MB     00:00     </span><br><span class="line">extras/7/x86_64/filelists_db                             | 226 kB     00:00     </span><br><span class="line">updates/7/x86_64/filelists_db                            | 3.4 MB     00:00     </span><br><span class="line">policycoreutils-python-2.5-34.el7.x86_64 : SELinux policy core python utilities</span><br><span class="line">Repo        : base</span><br><span class="line">Matched from:</span><br><span class="line">Filename    : /usr/sbin/semanage</span><br><span class="line">[root@localhost ~]<span class="comment"># yum install policycoreutils-python</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># some useful args for semanage</span></span><br><span class="line"><span class="comment"># -l search, -a add, -m modify, -d delete.</span></span><br><span class="line">[root@localhost ~]<span class="comment"># man semanage</span></span><br><span class="line">[root@localhost ~]<span class="comment"># semanage fcontext -a -t httpd_sys_content_t /home/web</span></span><br><span class="line">[root@localhost ~]<span class="comment"># semanage fcontext -a -t httpd_sys_content_t /home/web/*</span></span><br><span class="line">[root@localhost ~]<span class="comment"># restorecon -Rv /home/web</span></span><br><span class="line">restorecon reset /home/web context unconfined_u:object_r:home_root_t:s0-&gt;unconfined_u:object_r:httpd_sys_content_t:s0</span><br><span class="line">restorecon reset /home/web/index.html context unconfined_u:object_r:home_root_t:s0-&gt;unconfined_u:object_r:httpd_sys_content_t:s0</span><br><span class="line">[root@localhost ~]<span class="comment"># ls -Zd /home/web/</span></span><br><span class="line">drwxr-xr-x. root root unconfined_u:object_r:httpd_sys_content_t:s0 /home/web/</span><br><span class="line">[root@localhost ~]<span class="comment"># cat /home/web/index.html </span></span><br><span class="line">New web directory</span><br></pre></td></tr></table></figure>

<h1 id="DHCP-assigned-IP-and-static-IP"><a href="#DHCP-assigned-IP-and-static-IP" class="headerlink" title="DHCP assigned IP and static IP"></a>DHCP assigned IP and static IP</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">DHCP will assign your machine a dynamic IP address.</span><br><span class="line">However you are able to change your machine<span class="string">&#x27;s IP as a static one.</span></span><br><span class="line"><span class="string">[root@localhost ~]# vim /etc/sysconfig/network-scripts/ifcfg-ens33 </span></span><br><span class="line"><span class="string">[root@localhost ~]# systemctl restart network </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#nmtui: Network Manager Text User Interface</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># DNS, Gateway and other options</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">#the hosts config file on Windows: C:\\Windows\System32\drivers\etc\hosts</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Gateway ==&gt; find on router or use &#x27;</span>ipconfig<span class="string">&#x27; on your pc to see your IP</span></span><br><span class="line"><span class="string">DNS server ==&gt; could be your pc&#x27;</span>s IP or Google<span class="string">&#x27;s DNS was recommended 8.8.8.8</span></span><br></pre></td></tr></table></figure>

<h1 id="Servers"><a href="#Servers" class="headerlink" title="Servers"></a>Servers</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Server, Virtual Host, VPS (Virtual Private Server), ECS (Elastic Computing Service, e.g. cloud)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># research: Github page + Hexo</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># now we add two static IP addresses to server for study purpose</span></span><br><span class="line">[root@localhost ~]<span class="comment"># nmtui</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart network</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cat /etc/sysconfig/network-scripts/ifcfg-ens33</span></span><br><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">IPV6_AUTOCONF=yes</span><br><span class="line">IPV6_DEFROUTE=yes</span><br><span class="line">IPV6_FAILURE_FATAL=no</span><br><span class="line">IPV6_ADDR_GEN_MODE=stable-privacy</span><br><span class="line">NM_CONTROLLED=yes</span><br><span class="line">NAME=ens33</span><br><span class="line">UUID=82b3a0c8-75e6-45b9-a813-304a9925a64f</span><br><span class="line">DEVICE=ens33</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=192.168.0.120</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">GATEWAY=192.168.0.1</span><br><span class="line">DNS1=8.8.8.8</span><br><span class="line">IPV6INIT=yes</span><br><span class="line">USERCTL=no</span><br><span class="line">PREFIX=24</span><br><span class="line"><span class="comment"># here</span></span><br><span class="line">IPADDR1=192.168.0.10</span><br><span class="line">PREFIX1=24</span><br><span class="line">NETMASK1=255.255.255.0</span><br><span class="line">IPADDR2=192.168.0.20</span><br><span class="line">PREFIX2=24</span><br><span class="line">NETMASK2=255.255.255.0</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># ping 192.168.0.10</span></span><br><span class="line">PING 192.168.0.10 (192.168.0.10) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.0.10: icmp_seq=1 ttl=64 time=0.046 ms</span><br><span class="line">64 bytes from 192.168.0.10: icmp_seq=2 ttl=64 time=0.112 ms</span><br><span class="line">64 bytes from 192.168.0.10: icmp_seq=3 ttl=64 time=0.057 ms</span><br><span class="line">64 bytes from 192.168.0.10: icmp_seq=4 ttl=64 time=0.063 ms</span><br><span class="line">64 bytes from 192.168.0.10: icmp_seq=5 ttl=64 time=0.124 ms</span><br><span class="line">^C</span><br><span class="line">--- 192.168.0.10 ping statistics ---</span><br><span class="line">5 packets transmitted, 5 received, 0% packet loss, time 3999ms</span><br><span class="line">rtt min/avg/max/mdev = 0.046/0.080/0.124/0.032 ms</span><br><span class="line">[root@localhost ~]<span class="comment"># ping 192.168.0.20</span></span><br><span class="line">PING 192.168.0.20 (192.168.0.20) 56(84) bytes of data.</span><br><span class="line">64 bytes from 192.168.0.20: icmp_seq=1 ttl=64 time=0.045 ms</span><br><span class="line">64 bytes from 192.168.0.20: icmp_seq=2 ttl=64 time=0.123 ms</span><br><span class="line">64 bytes from 192.168.0.20: icmp_seq=3 ttl=64 time=0.116 ms</span><br><span class="line">^C</span><br><span class="line">--- 192.168.0.20 ping statistics ---</span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2000ms</span><br><span class="line">rtt min/avg/max/mdev = 0.045/0.094/0.123/0.036 ms</span><br><span class="line">[root@localhost ~]<span class="comment"># ls /home/web</span></span><br><span class="line">index.html</span><br><span class="line">[root@localhost ~]<span class="comment"># cat /home/web/index.html </span></span><br><span class="line">New web directory</span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /home/web/10</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /home/web/20</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;IP: 192.168.0.10&quot; &gt; /home/web/10/index.html</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;IP: 192.168.0.20&quot; &gt; /home/web/20/index.html</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf </span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart httpd</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># add these into the Apache config file after &quot;User apache Group apache&quot;</span></span><br><span class="line">&lt;VirtualHost 192.168.0.10&gt;</span><br><span class="line">        DocumentRoot /home/web/10</span><br><span class="line">        ServerName www.linuxserver.com</span><br><span class="line">        &lt;Directory /home/web/10&gt;</span><br><span class="line">                AllowOverride None</span><br><span class="line">                Require all granted</span><br><span class="line">        &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost 192.168.0.20&gt;</span><br><span class="line">        DocumentRoot /home/web/20</span><br><span class="line">        ServerName bbs.linuxserver.com</span><br><span class="line">        &lt;Directory /home/web/20&gt;</span><br><span class="line">                AllowOverride None</span><br><span class="line">                Require all granted</span><br><span class="line">        &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># now go to 192.168.0.10 and 192.168.0.20 see if they show the correct content</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># if you have not set security context, do it as previous sections shown</span></span><br><span class="line">[root@localhost ~]<span class="comment"># semanage fcontext -a -t httpd_sys_content_t /home/web/10</span></span><br><span class="line">[root@localhost ~]<span class="comment"># semanage fcontext -a -t httpd_sys_content_t /home/web/10*</span></span><br><span class="line">[root@localhost ~]<span class="comment"># semanage fcontext -a -t httpd_sys_content_t /home/web/20</span></span><br><span class="line">[root@localhost ~]<span class="comment"># semanage fcontext -a -t httpd_sys_content_t /home/web/20*</span></span><br><span class="line">[root@localhost ~]<span class="comment"># restorecon -Rv /home/web</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># domain name based assignment (note: do these on client machine rather than on server!)</span></span><br><span class="line">[mo@mos-computer ~]$ sudo vim /etc/hosts</span><br><span class="line"><span class="comment"># add ip address and corresponding domain name to it, then ping to see what happened</span></span><br><span class="line">[mo@mos-computer ~]$ ping www.linuxserver.com</span><br><span class="line">[mo@mos-computer ~]$ ping bbs.linuxserver.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#back to server and do the followings</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls /home/web</span></span><br><span class="line">10  20  index.html</span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /home/web/www</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mkdir /home/web/bbs</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;WWW.linuxserver.com&quot; &gt; /home/web/www/index.html</span></span><br><span class="line">[root@localhost ~]<span class="comment"># echo &quot;BBS.linuxserver.com&quot; &gt; /home/web/bbs/index.html</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/httpd/conf/httpd.conf </span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart httpd</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rm -rf /home/web/10</span></span><br><span class="line">[root@localhost ~]<span class="comment"># rm -rf /home/web/20</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls /home/web/</span></span><br><span class="line">bbs  index.html  www</span><br><span class="line"></span><br><span class="line"><span class="comment"># add these in httpd.conf</span></span><br><span class="line">&lt;VirtualHost 192.168.0.10&gt;</span><br><span class="line">        DocumentRoot /home/web/www</span><br><span class="line">        ServerName www.linuxserver.com</span><br><span class="line">        &lt;Directory /home/web/www&gt;</span><br><span class="line">                AllowOverride None</span><br><span class="line">                Require all granted</span><br><span class="line">        &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line">&lt;VirtualHost 192.168.0.10&gt;</span><br><span class="line">        DocumentRoot /home/web/bbs</span><br><span class="line">        ServerName bbs.linuxserver.com</span><br><span class="line">        &lt;Directory /home/web/bbs&gt;</span><br><span class="line">                AllowOverride None</span><br><span class="line">                Require all granted</span><br><span class="line">        &lt;/Directory&gt;</span><br><span class="line">&lt;/VirtualHost&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># remember to remove all content about &#x27;10&#x27; &#x27;20&#x27; in the config file</span></span><br><span class="line"><span class="comment"># now access www.linuxserver.com and bbs.linuxserver.com see what happened</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># default port: 80, SSL: Secure Socket Layer, TLS: Transport Layer Security, CA: Certificate Authorities</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Now we are going to set HTTPS for Apache server</span></span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --zone=public --add-port=443/tcp --permanent</span></span><br><span class="line">success</span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --reload</span></span><br><span class="line">success</span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --list-ports</span></span><br><span class="line">80/tcp 443/tcp</span><br><span class="line">[root@localhost ~]<span class="comment"># yum install -y mod_ssl</span></span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Determining fastest mirrors</span><br><span class="line"> * base: mirrors.tuna.tsinghua.edu.cn</span><br><span class="line"> * extras: mirrors.tuna.tsinghua.edu.cn</span><br><span class="line"> * updates: ftp.twaren.net</span><br><span class="line">base                                                     | 3.6 kB     00:00     </span><br><span class="line">extras                                                   | 2.9 kB     00:00     </span><br><span class="line">updates                                                  | 2.9 kB     00:00     </span><br><span class="line">updates/7/x86_64/primary_db                                | 6.5 MB   00:47     </span><br><span class="line">Resolving Dependencies</span><br><span class="line">--&gt; Running transaction check</span><br><span class="line">---&gt; Package mod_ssl.x86_64 1:2.4.6-97.el7.centos will be installed</span><br><span class="line">--&gt; Finished Dependency Resolution</span><br><span class="line"></span><br><span class="line">Dependencies Resolved</span><br><span class="line"></span><br><span class="line">================================================================================</span><br><span class="line"> Package        Arch          Version                      Repository      Size</span><br><span class="line">================================================================================</span><br><span class="line">Installing:</span><br><span class="line"> mod_ssl        x86_64        1:2.4.6-97.el7.centos        updates        114 k</span><br><span class="line"></span><br><span class="line">Transaction Summary</span><br><span class="line">================================================================================</span><br><span class="line">Install  1 Package</span><br><span class="line"></span><br><span class="line">Total download size: 114 k</span><br><span class="line">Installed size: 224 k</span><br><span class="line">Downloading packages:</span><br><span class="line">mod_ssl-2.4.6-97.el7.centos.x86_64.rpm                     | 114 kB   00:05     </span><br><span class="line">Running transaction check</span><br><span class="line">Running transaction <span class="built_in">test</span></span><br><span class="line">Transaction <span class="built_in">test</span> succeeded</span><br><span class="line">Running transaction</span><br><span class="line">  Installing : 1:mod_ssl-2.4.6-97.el7.centos.x86_64                         1/1 </span><br><span class="line">  Verifying  : 1:mod_ssl-2.4.6-97.el7.centos.x86_64                         1/1 </span><br><span class="line"></span><br><span class="line">Installed:</span><br><span class="line">  mod_ssl.x86_64 1:2.4.6-97.el7.centos                                          </span><br><span class="line"></span><br><span class="line">Complete!</span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart httpd</span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls /etc/httpd/conf.d/ssl.conf</span></span><br><span class="line">/etc/httpd/conf.d/ssl.conf</span><br><span class="line"></span><br><span class="line"><span class="comment"># some config fil[root@localhost ~]# ls /etc/pki/tls/private/localhost.key </span></span><br><span class="line">[root@localhost ~]<span class="comment"># ls /etc/pki/tls/private/localhost.key</span></span><br><span class="line">es <span class="keyword">for</span> HTTPS certificate</span><br><span class="line">[root@localhost ~]<span class="comment"># ls /etc/pki/tls/certs/localhost.crt </span></span><br><span class="line">/etc/pki/tls/certs/localhost.crt</span><br><span class="line"></span><br><span class="line"><span class="comment"># MAKING a CA, StartSSL, CACERT (free), if you do this for start-up purposes, buy one</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cd /etc/httpd/</span></span><br><span class="line">[root@localhost httpd]<span class="comment"># mkdir pki</span></span><br><span class="line">[root@localhost httpd]<span class="comment"># cd pki</span></span><br><span class="line">[root@localhost pki]<span class="comment"># openssl genrsa -out server.key 2048</span></span><br><span class="line">Generating RSA private key, 2048 bit long modulus</span><br><span class="line">................+++</span><br><span class="line">...............................+++</span><br><span class="line">e is 65537 (0x10001)</span><br><span class="line">[root@localhost pki]<span class="comment"># cat server.key </span></span><br><span class="line">-----BEGIN RSA PRIVATE KEY-----</span><br><span class="line">MIIEpAIBAAKCAQEAxU9wBv7mLY4zkfEcrWBevyJeBrNskfiGFez/3QWoF46LXJyP</span><br><span class="line">5rcc0fnzyuTTfWswSF9so5EPARf5P5i1g7mqXTytAUhtHbVtQYZMkRM+J0jo9Ao1</span><br><span class="line">awfwSaS0rjLvA+/kkPkcdfl4018SA6LHk4uq3yNKmZpubhsnWPgZ2Xgi5ouxyIiX</span><br><span class="line">XieoAZ/ALVss8lqwg0Z1EwEL44vrKT/7B7QjZhb3daxBD0ev5zzxl5l6gHOrn8Jj</span><br><span class="line">ORaECL4zNPbA01jvkdARQ0hJunmMUjYtzjeCvksP11QYmxQLVhyCXXZDjVfLbKIV</span><br><span class="line">8Qye+onKTXt+AMnGUtUMexQG11hfIh+43WrhHQIDAQABAoIBAQCFJmBROD6Yy3ed</span><br><span class="line">qvpRPdFyZnzRRM+lifLiZPcdbi3LB9SgAL9TUIrQYD7W0qit4GHK1Sp5DvDzKfx3</span><br><span class="line">oFQNuoNvO/z7+qY4ADDkoP6WgEfXNuqNlT4LJmZPLCkJzTFilMbH1nQQYPPaoDOF</span><br><span class="line">5JmNxhjfT++NzJttDkH1VigLi3jx3m9hHJxJqlmZ8hMMlfQWq8SNODFAScrqvvBb</span><br><span class="line">xwYSCn6QAxQ7YWoDoRQTP1Hd9H3gFv91L7dyheNohvLIyA5t3OPeE00rQ18nMnLN</span><br><span class="line">ebGGKh1MvSuPd6ybEff1x2kiZ+n8qjZhQySvTUDNBctlXqCbwuWH+KxqmcliTFuh</span><br><span class="line">HeAk0jf5AoGBAPDbY6d9004ZMIvhPUx794Eus76iIsQujAHfpjmx4v+BvZ+KU0iz</span><br><span class="line">Rw77QDur5rYXac5TALXMHMtaoQZmm9ZJIyw8Bo0oKEvglGn+mTdbsX5P2Jc+tWS9</span><br><span class="line">/71rBoyShunf+ecE4l8XAtw6MFJHlLlXYIzw7C++XWIMci89GpKkrDWzAoGBANG3</span><br><span class="line">KUgmB8M+lHnk0mFDcDahMkBOsuT82MNtSMClYbh6g9o29VTOdPpozRyN2pe+RjG9</span><br><span class="line">nOrIKLNr/BGu1oQG4rY/ZAOfS5lw/8LOWTtmc22LdMXtGdtzyLlyLiaLSml0A35k</span><br><span class="line">hY1efWPmdQrnbk+JN/IEda5yAax3so31wGjyZsXvAoGBAModIAQGN1I7GxzWdwz+</span><br><span class="line">nhReb2ESR6Be+wf7eE7D8pu8cLY3amoAXym4Nw+b0e+NuDD2QAtOa/9NXwCzDCSG</span><br><span class="line">nShaepjrUN1TaNeFWWc1370CHdvVOHyAX+HAtO8zallJpThyRc/LzI+nmLMC9E+P</span><br><span class="line">firnZRsvYMeNcCgp22mhHA23AoGARwhZDT0EaBdsRxVARP2IpphW4v1FDtatvRPp</span><br><span class="line">Dod13/xvaJww4LbFXIPe5YsOvVMPh42H9uYxEwTCbmLf+fwzEjPKdoegHarullc6</span><br><span class="line">VipPco1H0jqLBY/kLxwDkb6gR7Op80etDMMyiYHnpvfYn0wFDQ6BpcKr2nT4n6jb</span><br><span class="line">sTBZqzUCgYASMckOcXlNkjf22lbcSdvF8m8oeZtCi1ncVM+AhYXOiHUdK7xfRHn5</span><br><span class="line">jXXVuXEvJZhp6VUge0BWbi5sCY0RIzuIOEM4tvgROQRd+WyNjtF1Ko2z0Kerm9x8</span><br><span class="line">q2iHdvyqdCFxkovPeAEiqXmK88AC+3wW9jDWbyIzodsXAiZapOhniw==</span><br><span class="line">-----END RSA PRIVATE KEY-----</span><br><span class="line">[root@localhost pki]<span class="comment"># openssl req -new -key server.key -out server.csr</span></span><br><span class="line">You are about to be asked to enter information that will be incorporated</span><br><span class="line">into your certificate request.</span><br><span class="line">What you are about to enter is what is called a Distinguished Name or a DN.</span><br><span class="line">There are quite a few fields but you can leave some blank</span><br><span class="line">For some fields there will be a default value,</span><br><span class="line">If you enter <span class="string">&#x27;.&#x27;</span>, the field will be left blank.</span><br><span class="line">-----</span><br><span class="line">Country Name (2 letter code) [XX]:CN</span><br><span class="line">State or Province Name (full name) []:Yunnan</span><br><span class="line">Locality Name (eg, city) [Default City]:Kunming</span><br><span class="line">Organization Name (eg, company) [Default Company Ltd]:Mo<span class="string">&#x27;s Company</span></span><br><span class="line"><span class="string">Organizational Unit Name (eg, section) []:Linux server</span></span><br><span class="line"><span class="string">Common Name (eg, your name or your server&#x27;</span>s hostname) []:192.168.0.120</span><br><span class="line">Email Address []:moshuheng922@google.com</span><br><span class="line"></span><br><span class="line">Please enter the following <span class="string">&#x27;extra&#x27;</span> attributes</span><br><span class="line">to be sent with your certificate request</span><br><span class="line">A challenge password []:</span><br><span class="line">An optional company name []:</span><br><span class="line">[root@localhost pki]<span class="comment"># cat server.csr </span></span><br><span class="line">-----BEGIN CERTIFICATE REQUEST-----</span><br><span class="line">MIIC5DCCAcwCAQAwgZ4xCzAJBgNVBAYTAkNOMQ8wDQYDVQQIDAZZdW5uYW4xEDAO</span><br><span class="line">BgNVBAcMB0t1bm1pbmcxFTATBgNVBAoMDE1vJ3MgQ29tcGFueTEVMBMGA1UECwwM</span><br><span class="line">TGludXggc2VydmVyMRYwFAYDVQQDDA0xOTIuMTY4LjAuMTIwMSYwJAYJKoZIhvcN</span><br><span class="line">AQkBFhdtb3NodWhlbmc5MjJAZ29vZ2xlLmNvbTCCASIwDQYJKoZIhvcNAQEBBQAD</span><br><span class="line">ggEPADCCAQoCggEBAMVPcAb+5i2OM5HxHK1gXr8iXgazbJH4hhXs/90FqBeOi1yc</span><br><span class="line">j+a3HNH588rk031rMEhfbKORDwEX+T+YtYO5ql08rQFIbR21bUGGTJETPidI6PQK</span><br><span class="line">NWsH8EmktK4y7wPv5JD5HHX5eNNfEgOix5OLqt8jSpmabm4bJ1j4Gdl4IuaLsciI</span><br><span class="line">l14nqAGfwC1bLPJasINGdRMBC+OL6yk/+we0I2YW93WsQQ9Hr+c88ZeZeoBzq5/C</span><br><span class="line">YzkWhAi+MzT2wNNY75HQEUNISbp5jFI2Lc43gr5LD9dUGJsUC1Ycgl12Q41Xy2yi</span><br><span class="line">FfEMnvqJyk17fgDJxlLVDHsUBtdYXyIfuN1q4R0CAwEAAaAAMA0GCSqGSIb3DQEB</span><br><span class="line">CwUAA4IBAQCwCkxCenVFeVJ5En45sWNnArc0srpvFDmEsAaOps5WOvcIANVT4AP7</span><br><span class="line">S3KPHfIIAJVD7WmpSV8scOcOhXHiOUuFxlP0c2Yu1GuJCH7c8xwlXppbDJNXW1an</span><br><span class="line">GbfFbEsHe+JQBCGyVJjhw6TdofLkeD1E+JzbXKMp2zd4qaLkVfsNTlp7dJPzsx6Z</span><br><span class="line">IHNm+htFb2y+GQf36A2R22owXn+T2w/Nr4diAJzJYSIG2tWy7xaRoOAckbDUIbYM</span><br><span class="line">SPCU4vez6MnvNzgSHiWMIf5l4t3/3X7x1gPp033MeIOTWFg8ZmlhUqF/10R1DvNB</span><br><span class="line">nFzQ+xrLPdEzIOL+qShlSwM6xSRCwnRm</span><br><span class="line">-----END CERTIFICATE REQUEST-----</span><br><span class="line">[root@localhost pki]<span class="comment"># openssl x509 -req -days 3650 -in server.csr -signkey server.key -out server.crt</span></span><br><span class="line">Signature ok</span><br><span class="line">subject=/C=CN/ST=Yunnan/L=Kunming/O=Mo<span class="string">&#x27;s Company/OU=Linux server/CN=192.168.0.120/emailAddress=moshuheng922@google.com</span></span><br><span class="line"><span class="string">Getting Private key</span></span><br><span class="line"><span class="string">[root@localhost pki]# cat server.crt</span></span><br><span class="line"><span class="string">-----BEGIN CERTIFICATE-----</span></span><br><span class="line"><span class="string">MIIDujCCAqICCQD7RCE9TJWfxjANBgkqhkiG9w0BAQsFADCBnjELMAkGA1UEBhMC</span></span><br><span class="line"><span class="string">Q04xDzANBgNVBAgMBll1bm5hbjEQMA4GA1UEBwwHS3VubWluZzEVMBMGA1UECgwM</span></span><br><span class="line"><span class="string">TW8ncyBDb21wYW55MRUwEwYDVQQLDAxMaW51eCBzZXJ2ZXIxFjAUBgNVBAMMDTE5</span></span><br><span class="line"><span class="string">Mi4xNjguMC4xMjAxJjAkBgkqhkiG9w0BCQEWF21vc2h1aGVuZzkyMkBnb29nbGUu</span></span><br><span class="line"><span class="string">Y29tMB4XDTIxMDMxOTE0MTU0M1oXDTMxMDMxNzE0MTU0M1owgZ4xCzAJBgNVBAYT</span></span><br><span class="line"><span class="string">AkNOMQ8wDQYDVQQIDAZZdW5uYW4xEDAOBgNVBAcMB0t1bm1pbmcxFTATBgNVBAoM</span></span><br><span class="line"><span class="string">DE1vJ3MgQ29tcGFueTEVMBMGA1UECwwMTGludXggc2VydmVyMRYwFAYDVQQDDA0x</span></span><br><span class="line"><span class="string">OTIuMTY4LjAuMTIwMSYwJAYJKoZIhvcNAQkBFhdtb3NodWhlbmc5MjJAZ29vZ2xl</span></span><br><span class="line"><span class="string">LmNvbTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoCggEBAMVPcAb+5i2OM5Hx</span></span><br><span class="line"><span class="string">HK1gXr8iXgazbJH4hhXs/90FqBeOi1ycj+a3HNH588rk031rMEhfbKORDwEX+T+Y</span></span><br><span class="line"><span class="string">tYO5ql08rQFIbR21bUGGTJETPidI6PQKNWsH8EmktK4y7wPv5JD5HHX5eNNfEgOi</span></span><br><span class="line"><span class="string">x5OLqt8jSpmabm4bJ1j4Gdl4IuaLsciIl14nqAGfwC1bLPJasINGdRMBC+OL6yk/</span></span><br><span class="line"><span class="string">+we0I2YW93WsQQ9Hr+c88ZeZeoBzq5/CYzkWhAi+MzT2wNNY75HQEUNISbp5jFI2</span></span><br><span class="line"><span class="string">Lc43gr5LD9dUGJsUC1Ycgl12Q41Xy2yiFfEMnvqJyk17fgDJxlLVDHsUBtdYXyIf</span></span><br><span class="line"><span class="string">uN1q4R0CAwEAATANBgkqhkiG9w0BAQsFAAOCAQEAoPkUQ+iHyEsLj6TrNUFADRHr</span></span><br><span class="line"><span class="string">oel/WtWMIMB/A8ht+K0/nIEnptXoD2sbEVJCKew/D6RKuTlVbgEtKUQK8oHZWDLr</span></span><br><span class="line"><span class="string">ChE06ULMC5cVntY78E8tid8wQ0jF7bVqLnDIiTw6xzH+N0PgOS1/5eR3yqkJJ5xz</span></span><br><span class="line"><span class="string">csOLXNlpqLFFsG5o2rVv0xlughpzDdwwOwdjHNkNvyIsDOmRQL7fuVYHzxE5Bs6h</span></span><br><span class="line"><span class="string">b4cGX/DE3pNddBP5+90krXVjLfZq+FMiLMDEGGVGCqxI3/8dkrwtU9yjHT2xI9Ra</span></span><br><span class="line"><span class="string">ASJL7wUoPAqocJd9JX398Xm5tu1Ct+DR4xX9XiPjD1JqHY11t48At7+KntYCRw==</span></span><br><span class="line"><span class="string">-----END CERTIFICATE-----</span></span><br><span class="line"><span class="string">[root@localhost pki]# ls</span></span><br><span class="line"><span class="string">server.crt  server.csr  server.key</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># now replace the original key, cer provided by OS</span></span><br><span class="line"><span class="string">[root@localhost pki]# cp server.key /etc/pki/tls/private/</span></span><br><span class="line"><span class="string">[root@localhost pki]# cp server.crt /etc/pki/tls/certs/</span></span><br><span class="line"><span class="string">[root@localhost pki]# ls /etc/pki/tls/private/</span></span><br><span class="line"><span class="string">localhost.key  server.key</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"># now config the server certificate, add the following into the config file</span></span><br><span class="line"><span class="string">SSLCertificateFile /etc/pki/tls/certs/server.crt</span></span><br><span class="line"><span class="string">SSLCertificateKeyFile /etc/pki/tls/private/server.key</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">[root@localhost httpd]# ls</span></span><br><span class="line"><span class="string">conf  conf.d  conf.modules.d  logs  modules  pki  run</span></span><br><span class="line"><span class="string">[root@localhost httpd]# vim conf.d/ssl.conf </span></span><br><span class="line"><span class="string">[root@localhost httpd]# systemctl restart httpd</span></span><br></pre></td></tr></table></figure>

<h1 id="Intro-to-DB-MariaDB-using-MySQL"><a href="#Intro-to-DB-MariaDB-using-MySQL" class="headerlink" title="Intro to DB: MariaDB (using MySQL)"></a>Intro to DB: MariaDB (using MySQL)</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost ~]<span class="comment"># yum install mariadb mariadb-server</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl start mariadb</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl enable mariadb</span></span><br><span class="line">Created symlink from /etc/systemd/system/multi-user.target.wants/mariadb.service to /usr/lib/systemd/system/mariadb.service.</span><br><span class="line">[root@localhost ~]<span class="comment"># mysql_secure_installation</span></span><br><span class="line"></span><br><span class="line">NOTE: RUNNING ALL PARTS OF THIS SCRIPT IS RECOMMENDED FOR ALL MariaDB</span><br><span class="line">      SERVERS IN PRODUCTION USE!  PLEASE READ EACH STEP CAREFULLY!</span><br><span class="line"></span><br><span class="line">In order to <span class="built_in">log</span> into MariaDB to secure it, we<span class="string">&#x27;ll need the current</span></span><br><span class="line"><span class="string">password for the root user.  If you&#x27;</span>ve just installed MariaDB, and</span><br><span class="line">you haven<span class="string">&#x27;t set the root password yet, the password will be blank,</span></span><br><span class="line"><span class="string">so you should just press enter here.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Enter current password for root (enter for none): </span></span><br><span class="line"><span class="string">OK, successfully used password, moving on...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Setting the root password ensures that nobody can log into the MariaDB</span></span><br><span class="line"><span class="string">root user without the proper authorisation.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Set root password? [Y/n] y</span></span><br><span class="line"><span class="string">New password: </span></span><br><span class="line"><span class="string">Re-enter new password: </span></span><br><span class="line"><span class="string">Password updated successfully!</span></span><br><span class="line"><span class="string">Reloading privilege tables..</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, a MariaDB installation has an anonymous user, allowing anyone</span></span><br><span class="line"><span class="string">to log into MariaDB without having to have a user account created for</span></span><br><span class="line"><span class="string">them.  This is intended only for testing, and to make the installation</span></span><br><span class="line"><span class="string">go a bit smoother.  You should remove them before moving into a</span></span><br><span class="line"><span class="string">production environment.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Remove anonymous users? [Y/n] y</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Normally, root should only be allowed to connect from &#x27;</span>localhost<span class="string">&#x27;.  This</span></span><br><span class="line"><span class="string">ensures that someone cannot guess at the root password from the network.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Disallow root login remotely? [Y/n] y</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">By default, MariaDB comes with a database named &#x27;</span><span class="built_in">test</span><span class="string">&#x27; that anyone can</span></span><br><span class="line"><span class="string">access.  This is also intended only for testing, and should be removed</span></span><br><span class="line"><span class="string">before moving into a production environment.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Remove test database and access to it? [Y/n] y</span></span><br><span class="line"><span class="string"> - Dropping test database...</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"> - Removing privileges on test database...</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reloading the privilege tables will ensure that all changes made so far</span></span><br><span class="line"><span class="string">will take effect immediately.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Reload privilege tables now? [Y/n] y</span></span><br><span class="line"><span class="string"> ... Success!</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Cleaning up...</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">All done!  If you&#x27;</span>ve completed all of the above steps, your MariaDB</span><br><span class="line">installation should now be secure.</span><br><span class="line"></span><br><span class="line">Thanks <span class="keyword">for</span> using MariaDB!</span><br><span class="line"></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/my.cnf</span></span><br><span class="line"><span class="comment"># add these into this file</span></span><br><span class="line">character_set_server=utf8</span><br><span class="line">init_connect=<span class="string">&#x27;SET NAMES utf8&#x27;</span></span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart mariadb</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># log in</span></span><br><span class="line">[root@localhost ~]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 2</span><br><span class="line">Server version: 5.5.68-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">+--------------------+</span><br><span class="line">3 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show variables like <span class="string">&#x27;%character_set%&#x27;</span>;</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| Variable_name            | Value                      |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">| character_set_client     | utf8                       |</span><br><span class="line">| character_set_connection | utf8                       |</span><br><span class="line">| character_set_database   | utf8                       |</span><br><span class="line">| character_set_filesystem | binary                     |</span><br><span class="line">| character_set_results    | utf8                       |</span><br><span class="line">| character_set_server     | utf8                       |</span><br><span class="line">| character_set_system     | utf8                       |</span><br><span class="line">| character_sets_dir       | /usr/share/mysql/charsets/ |</span><br><span class="line">+--------------------------+----------------------------+</span><br><span class="line">8 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; Bye</span><br><span class="line"></span><br><span class="line"><span class="comment"># allow remote connect: mysql_secure_installation reset again, then open firewall</span></span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --zone=public --add-port=3306/tcp --permanent</span></span><br><span class="line">success</span><br><span class="line">[root@localhost ~]<span class="comment"># firewall-cmd --reload</span></span><br><span class="line">success</span><br><span class="line"></span><br><span class="line"><span class="comment"># alternatives: firewall-cmd --zone=public --add-service=mysql --permanent</span></span><br></pre></td></tr></table></figure>

<h1 id="PHP-and-LAMP-frame"><a href="#PHP-and-LAMP-frame" class="headerlink" title="PHP and LAMP frame"></a>PHP and LAMP frame</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># static page--&gt; no data upload, dynamic page--&gt; upload data/ interactive </span></span><br><span class="line"></span><br><span class="line"><span class="comment"># LAMP frame: Linux, Apache, MySQL, PHP (LNMP , need Nginx)</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum install php</span></span><br><span class="line">[root@localhost ~]<span class="comment"># yum install php-mysql</span></span><br><span class="line"><span class="comment"># now test the php installation</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /home/web/info.php</span></span><br><span class="line">&lt;?php</span><br><span class="line">        phpinfo();</span><br><span class="line">?&gt;</span><br><span class="line">[root@localhost ~]<span class="comment"># systemctl restart httpd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># now access your server with ip+info.php at the end of the address see what happened</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># some useful config file</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/php.ini</span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/httpd/conf.d/php.conf </span></span><br><span class="line">[root@localhost ~]<span class="comment"># vim /etc/php.d/mysql.ini</span></span><br></pre></td></tr></table></figure>

<h1 id="A-website-LAMP-WordPress"><a href="#A-website-LAMP-WordPress" class="headerlink" title="A website: LAMP + WordPress"></a>A website: LAMP + WordPress</h1><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br></pre></td><td class="code"><pre><span class="line">[mo@mos-computer hgfs]$ ls</span><br><span class="line">batch                                tutorial</span><br><span class="line">htop-2.2.0.tar.gz                    wordpress-5.4.zip</span><br><span class="line">sogoupinyin-2.4.0.3469-2.x86_64.rpm  youdao-dict_1.1.0-0-deepin_amd64.deb</span><br><span class="line">sogoupinyin_2.4.0.3469_amd64.deb</span><br><span class="line">[mo@mos-computer hgfs]$ scp wordpress-5.4.zip root@192.168.0.120:/root</span><br><span class="line">wordpress-5.4.zip                             100%   13MB   6.3MB/s   00:02   </span><br><span class="line">[root@localhost ~]<span class="comment"># ls</span></span><br><span class="line">anaconda-ks.cfg  name.txt  wordpress-5.4.zip</span><br><span class="line">[root@localhost ~]<span class="comment"># yum install unzip</span></span><br><span class="line">[root@localhost ~]<span class="comment"># unzip wordpress-5.4.zip </span></span><br><span class="line">[root@localhost ~]<span class="comment"># cp -r wordpress /home/web</span></span><br><span class="line">[root@localhost ~]<span class="comment"># cd /home/web</span></span><br><span class="line">[root@localhost web]<span class="comment"># cd wordpress/</span></span><br><span class="line">[root@localhost wordpress]<span class="comment"># ls</span></span><br><span class="line">index.php        wp-blog-header.php    wp-includes        wp-settings.php</span><br><span class="line">license.txt      wp-comments-post.php  wp-links-opml.php  wp-signup.php</span><br><span class="line">readme.html      wp-config-sample.php  wp-load.php        wp-trackback.php</span><br><span class="line">wp-activate.php  wp-content            wp-login.php       xmlrpc.php</span><br><span class="line">wp-admin         wp-cron.php           wp-mail.php</span><br><span class="line"></span><br><span class="line"><span class="comment"># now access server with https://192.168.0.120/wordpress/wp-admin/setup-config.php</span></span><br><span class="line">Your server is running PHP version 5.4.16 but WordPress 5.4 requires at least 5.6.20.</span><br><span class="line"></span><br><span class="line"><span class="comment"># OK, fix this problem with the following commands</span></span><br><span class="line">rpm -Uvh https://mirror.webtatic.com/yum/el7/epel-release.rpm</span><br><span class="line">rpm -Uvh https://mirror.webtatic.com/yum/el7/webtatic-release.rpm</span><br><span class="line">yum remove php-common -y</span><br><span class="line">yum install -y php56w php56w-opcache php56w-xml php56w-mcrypt php56w-gd php56w-devel php56w-mysql php56w-intl php56w-mbstring</span><br><span class="line"><span class="comment"># reference: https://blog.csdn.net/qq_34829953/article/details/78078790</span></span><br><span class="line">[root@localhost wordpress]<span class="comment"># php -v</span></span><br><span class="line">PHP 5.6.40 (cli) (built: Jan 12 2019 13:11:15) </span><br><span class="line">Copyright (c) 1997-2016 The PHP Group</span><br><span class="line">Zend Engine v2.6.0, Copyright (c) 1998-2016 Zend Technologies</span><br><span class="line">    with Zend OPcache v7.0.6-dev, Copyright (c) 1999-2016, by Zend Technologies</span><br><span class="line">[root@localhost wordpress]<span class="comment"># systemctl restart httpd</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># go to https://192.168.0.120/wordpress/wp-admin/setup-config.php and you will see the following info</span></span><br><span class="line"></span><br><span class="line">Welcome to WordPress. Before getting started, we need some information on the database. You will need to know the following items before proceeding.</span><br><span class="line"></span><br><span class="line">Database name</span><br><span class="line">Database username</span><br><span class="line">Database password</span><br><span class="line">Database host</span><br><span class="line">Table prefix (<span class="keyword">if</span> you want to run more than one WordPress <span class="keyword">in</span> a single database)</span><br><span class="line">Weâre going to use this information to create a wp-config.php file. If <span class="keyword">for</span> any reason this automatic file creation doesnât work, donât worry. All this does is fill <span class="keyword">in</span> the database information to a configuration file. You may also simply open wp-config-sample.php <span class="keyword">in</span> a text editor, fill <span class="keyword">in</span> your information, and save it as wp-config.php. Need more <span class="built_in">help</span>? We got it.</span><br><span class="line"></span><br><span class="line"><span class="comment"># now you will need to do these in MariaDB</span></span><br><span class="line">[root@localhost wordpress]<span class="comment"># mysql -u root -p</span></span><br><span class="line">Enter password: </span><br><span class="line">Welcome to the MariaDB monitor.  Commands end with ; or \g.</span><br><span class="line">Your MariaDB connection id is 3</span><br><span class="line">Server version: 5.5.68-MariaDB MariaDB Server</span><br><span class="line"></span><br><span class="line">Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line"></span><br><span class="line">Type <span class="string">&#x27;help;&#x27;</span> or <span class="string">&#x27;\h&#x27;</span> <span class="keyword">for</span> <span class="built_in">help</span>. Type <span class="string">&#x27;\c&#x27;</span> to clear the current input statement.</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; create database wordpress;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; show databases;</span><br><span class="line">+--------------------+</span><br><span class="line">| Database           |</span><br><span class="line">+--------------------+</span><br><span class="line">| information_schema |</span><br><span class="line">| mysql              |</span><br><span class="line">| performance_schema |</span><br><span class="line">| wordpress          |</span><br><span class="line">+--------------------+</span><br><span class="line">4 rows <span class="keyword">in</span> <span class="built_in">set</span> (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; GRANT ALL on wordpress.* To <span class="string">&#x27;mo&#x27;</span>@<span class="string">&#x27;192.168.0.120&#x27;</span> IDENTIFIED BY<span class="string">&quot;mannersmakethman&quot;</span>;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line"></span><br><span class="line">MariaDB [(none)]&gt; </span><br><span class="line"></span><br><span class="line"><span class="comment"># now go to the config file and change some settings</span></span><br><span class="line">[root@localhost wordpress]<span class="comment"># cp wp-config-sample.php wp-config.php</span></span><br><span class="line">[root@localhost wordpress]<span class="comment"># vim wp-config.php </span></span><br><span class="line">// ** MySQL settings - You can get this info from your web host ** //</span><br><span class="line">/** The name of the database <span class="keyword">for</span> WordPress */</span><br><span class="line">define( <span class="string">&#x27;DB_NAME&#x27;</span>, <span class="string">&#x27;wordpress&#x27;</span> );</span><br><span class="line"></span><br><span class="line">/** MySQL database username */</span><br><span class="line">define( <span class="string">&#x27;DB_USER&#x27;</span>, <span class="string">&#x27;mo&#x27;</span> );</span><br><span class="line"></span><br><span class="line">/** MySQL database password */</span><br><span class="line">define( <span class="string">&#x27;DB_PASSWORD&#x27;</span>, <span class="string">&#x27;mannersmakethman&#x27;</span> );</span><br><span class="line"></span><br><span class="line">/** MySQL hostname */</span><br><span class="line">define( <span class="string">&#x27;DB_HOST&#x27;</span>, <span class="string">&#x27;192.168.0.120&#x27;</span> );</span><br><span class="line"></span><br><span class="line"><span class="comment"># to connect to database, we will need to set some SElinux config</span></span><br><span class="line">[root@localhost wordpress]<span class="comment"># systemctl restart httpd</span></span><br><span class="line">[root@localhost wordpress]<span class="comment"># getenforce</span></span><br><span class="line">Enforcing</span><br><span class="line">[root@localhost wordpress]<span class="comment"># getsebool -a | grep httpd</span></span><br><span class="line">httpd_anon_write --&gt; off</span><br><span class="line">httpd_builtin_scripting --&gt; on</span><br><span class="line">httpd_can_check_spam --&gt; off</span><br><span class="line">httpd_can_connect_ftp --&gt; off</span><br><span class="line">httpd_can_connect_ldap --&gt; off</span><br><span class="line">httpd_can_connect_mythtv --&gt; off</span><br><span class="line">httpd_can_connect_zabbix --&gt; off</span><br><span class="line">httpd_can_network_connect --&gt; off</span><br><span class="line">httpd_can_network_connect_cobbler --&gt; off</span><br><span class="line">httpd_can_network_connect_db --&gt; off</span><br><span class="line">httpd_can_network_memcache --&gt; off</span><br><span class="line">httpd_can_network_relay --&gt; off</span><br><span class="line">httpd_can_sendmail --&gt; off</span><br><span class="line">httpd_dbus_avahi --&gt; off</span><br><span class="line">httpd_dbus_sssd --&gt; off</span><br><span class="line">httpd_dontaudit_search_dirs --&gt; off</span><br><span class="line">httpd_enable_cgi --&gt; on</span><br><span class="line">httpd_enable_ftp_server --&gt; off</span><br><span class="line">httpd_enable_homedirs --&gt; off</span><br><span class="line">httpd_execmem --&gt; off</span><br><span class="line">httpd_graceful_shutdown --&gt; on</span><br><span class="line">httpd_manage_ipa --&gt; off</span><br><span class="line">httpd_mod_auth_ntlm_winbind --&gt; off</span><br><span class="line">httpd_mod_auth_pam --&gt; off</span><br><span class="line">httpd_read_user_content --&gt; off</span><br><span class="line">httpd_run_ipa --&gt; off</span><br><span class="line">httpd_run_preupgrade --&gt; off</span><br><span class="line">httpd_run_stickshift --&gt; off</span><br><span class="line">httpd_serve_cobbler_files --&gt; off</span><br><span class="line">httpd_setrlimit --&gt; off</span><br><span class="line">httpd_ssi_exec --&gt; off</span><br><span class="line">httpd_sys_script_anon_write --&gt; off</span><br><span class="line">httpd_tmp_exec --&gt; off</span><br><span class="line">httpd_tty_comm --&gt; off</span><br><span class="line">httpd_unified --&gt; off</span><br><span class="line">httpd_use_cifs --&gt; off</span><br><span class="line">httpd_use_fusefs --&gt; off</span><br><span class="line">httpd_use_gpg --&gt; off</span><br><span class="line">httpd_use_nfs --&gt; off</span><br><span class="line">httpd_use_openstack --&gt; off</span><br><span class="line">httpd_use_sasl --&gt; off</span><br><span class="line">httpd_verify_dns --&gt; off</span><br><span class="line">[root@localhost wordpress]<span class="comment"># setsebool -P httpd_can_network_connect=1</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># ok now go to https://192.168.0.120/wordpress/wp-admin/setup-config.php and follow the installation steps. After the installation you will see the dashboard.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#https://192.168.0.120/wordpress/ will be the main site</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># now you can do some search on how to set up your own personal/blog site.</span></span><br></pre></td></tr></table></figure>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>Shuheng Mo</span>
                    </p>
                
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a target="_blank" rel="noopener" href="http://creativecommons.org/licenses/by-nc/4.0/">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Manners maketh man.</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                    
                        <a href="/tags/Linux/"># Linux</a>
                    
                        
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();">back</a>
                <span>Â· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
                <a class="prev" rel="prev" href="/2021/06/19/Shell_Scripts_Note/">Shell Scripts & Linux Programming</a>
            
            
            <a class="next" rel="next" href="/2021/06/19/Network_Security_Note/">Network & Security</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>Â© Shuheng Mo | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
